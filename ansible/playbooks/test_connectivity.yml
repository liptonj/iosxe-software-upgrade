---
- name: Test Connectivity to Cisco Switches
  hosts: switches
  gather_facts: false

  tasks:
    - name: Test SSH connection and gather minimal facts
      cisco.ios.ios_facts:
        gather_subset: min
      register: facts_result

    - name: Display connection success
      ansible.builtin.debug:
        msg: "Successfully connected to {{ facts_result.ansible_facts.ansible_net_hostname }} ({{ inventory_hostname }})"

    - name: Display IOS version
      ansible.builtin.debug:
        msg: "IOS Version: {{ facts_result.ansible_facts.ansible_net_version }}"

    - name: Display model
      ansible.builtin.debug:
        msg: "Model: {{ facts_result.ansible_facts.ansible_net_model }}"

    - name: Display serial number
      ansible.builtin.debug:
        msg: "Serial: {{ facts_result.ansible_facts.ansible_net_serialnum }}"

    - name: Connectivity test summary
      ansible.builtin.debug:
        msg: "âœ“ Connectivity test passed for {{ facts_result.ansible_facts.ansible_net_hostname }}"


---
- name: Check Flash Space and Files
  hosts: switches
  gather_facts: false
  vars:
    required_space_mb: 2048

  tasks:
    # Get flash directory listing
    - name: Get flash directory
      ansible.builtin.include_tasks: tasks/flash/get_flash_directory.yml

    # Calculate flash usage statistics
    - name: Calculate flash usage
      ansible.builtin.include_tasks: tasks/flash/calculate_flash_usage.yml

    # List old IOS images
    - name: List old images
      ansible.builtin.include_tasks: tasks/flash/list_old_images.yml

    # Provide recommendations
    - name: Provide recommendations
      ansible.builtin.include_tasks: tasks/flash/provide_recommendations.yml
